/**
 * Settings page JavaScript
 *
 * @module     mod_intebchat/settings
 * @copyright  2025 Alonso Arias <soporte@ingeweb.co>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_intebchat/settings",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){return{init:function(){$("#id_s_mod_intebchat_type").on("change",(function(e){$(".settingsform").addClass("mod_intebchat"),$(".settingsform").addClass("disabled"),$('.settingsform button[type="submit"]').click()}));var $apikeyField=$("#id_apikey"),$assistantSelect=$("#id_assistant"),$apitypeSelect=$("#id_apitype");if($apikeyField.length&&$assistantSelect.length){var updateAssistantList=function(){var apikey=$apikeyField.val(),apitype=$apitypeSelect.val()||$apitypeSelect.find('input[type="hidden"]').val();apikey&&"assistant"===apitype&&($assistantSelect.prop("disabled",!0),Ajax.call([{methodname:"mod_intebchat_get_assistants",args:{apikey:apikey},done:function(response){$assistantSelect.empty(),response.assistants&&response.assistants.length>0?$.each(response.assistants,(function(index,assistant){$assistantSelect.append($("<option></option>").attr("value",assistant.id).text(assistant.name))})):$assistantSelect.append($("<option></option>").attr("value","").text("No assistants found")),$assistantSelect.prop("disabled",!1)},fail:function(error){Notification.addNotification({message:"Failed to fetch assistants: "+error.message,type:"error"}),$assistantSelect.prop("disabled",!1)}}]))};$apikeyField.on("blur",updateAssistantList),$apitypeSelect.on("change",(function(){"assistant"===$(this).val()&&updateAssistantList()}))}$("form.mform").on("submit",(function(e){var hasErrors=!1;if("azure"===($("#id_apitype").val()||$("#id_apitype").find('input[type="hidden"]').val())&&($("#id_resourcename").val()||($("#id_error_resourcename").text("Required").show(),hasErrors=!0),$("#id_deploymentid").val()||($("#id_error_deploymentid").text("Required").show(),hasErrors=!0)),hasErrors)return e.preventDefault(),!1}));var $modelSelect=$("#id_model");if($modelSelect.length){var checkReasoningModel=function(val){return!(!val||!val.includes("o1")&&!val.includes("o3"))};$modelSelect.on("change",(function(){var modelName,val=$(this).val();checkReasoningModel(val)&&(modelName=val,Notification.addNotification({message:'Has seleccionado el modelo "'+modelName+'". Este es un modelo de razonamiento avanzado dise침ado para resolver problemas complejos mediante un an치lisis paso a paso. Ten en cuenta que puede tener un mayor costo y tiempo de respuesta.',type:"info"}))}));var initialVal=$modelSelect.val();initialVal&&checkReasoningModel(initialVal)}var $globalModelSelect=$("#id_s_mod_intebchat_model");$globalModelSelect.length&&$globalModelSelect.on("change",(function(){var val=$(this).val();val&&(val.includes("o1")||val.includes("o3"))&&Notification.addNotification({message:'Has seleccionado el modelo "'+val+'". Este es un modelo de razonamiento avanzado dise침ado para resolver problemas complejos mediante un an치lisis paso a paso. Ten en cuenta que puede tener un mayor costo y tiempo de respuesta.',type:"info"})}))}}}));

//# sourceMappingURL=settings.min.js.map